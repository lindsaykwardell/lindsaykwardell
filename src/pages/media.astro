---
// Component Imports
import BaseLayout from '../layouts/BaseLayout.astro'
import BlogHeader from '../components/BlogHeader.astro';
import BlogPostPreview from '../components/BlogPostPreview.astro';
import { getPodcasts } from '../api/podcasts.mjs'

const podcasts = await getPodcasts();

---
<BaseLayout>
  <script define:vars={{podcasts}}>
    window.media = {
      podcasts: () => podcasts.filter(media => media.type === 'podcast'),
      videos: () => podcasts.filter(media => media.type === 'video'),
      meetups: () => podcasts.filter(media => media.type === 'meetup'),
      hosted: () => podcasts.filter(media => media.host),
      guest: () => podcasts.filter(media => !media.host)
    }
  </script>
  <div>
    <h2 class="text-5xl text-center py-4">Podcasts and Videos</h2>
    <div class="flex flex-col lg:flex-row flex-wrap">
      {podcasts.map(p => (
        <div class="w-full lg:w-1/2 xl:w-1/3 p-4">
          <BlogPostPreview item={p} />
        </div>
      ))}
    </div>
  </div>
</BaseLayout>